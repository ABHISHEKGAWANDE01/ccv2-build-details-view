<!--
  ~ This file is part of "hybris integration" plugin for Intellij IDEA.
  ~ Copyright (C) 2014-2015 Alexander Bartash <AlexanderBartash@gmail.com>
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU Lesser General Public License as
  ~ published by the Free Software Foundation, either version 3 of the
  ~ License, or (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
  ~ See the GNU Lesser General Public License for more details.
  ~
  ~ You should have received a copy of the GNU Lesser General Public License
  ~ along with this program. If not, see <http://www.gnu.org/licenses/>.
  -->

<idea-plugin version="2">

    <id>ccom.intellij.idea.plugin.hybris.impex</id>
    <name>hybris integration</name>
    <version>3.1.2</version>

    <extensionPoints>
        <extensionPoint name="hybrisConfiguratorFactory" interface="com.intellij.idea.plugin.hybris.project.configurators.ConfiguratorFactory"/>
    </extensionPoints>

    <depends>com.intellij.modules.lang</depends>

    <depends optional="true" config-file="spring-optional-dependencies.xml">com.intellij.spring</depends>
    <depends optional="true" config-file="java-optional-dependencies.xml">com.intellij.modules.java</depends>
    <depends optional="true" config-file="uml-optional-dependencies.xml">com.intellij.diagram</depends>

    <vendor email="AlexanderBartash@gmail.com" url="https://bitbucket.org/AlexanderBartash/impex-editor-intellij-idea-plugin/wiki/Home">Alexander Bartash</vendor>

    <description>
        <![CDATA[
          This plugin is an open source (LGPL) and <b>official</b> plugin for hybris platform supported by community and hybris.

          <br/>
          If you have any questions you can send an email to me:
          <br/>
          Alexander Bartash: AlexanderBartash@gmail.com
          <br/>
          or
          <br/>
          Martin Zdarsky: martin.zdarsky@hybris.com

          <br/>
          <br/>
          <b>Import of hybris extensions to Intellij IDEA:</b>
          <br/>
          - Automatic modules dependency management.
          <br/>
          - Automatic classpath configuration.
          <br/>
          - Automatic Spring facet configuration (only Ultimate IDEA).

          <br/>
          <br/>
          <b>Enhanced project view tree:</b>
          <br/>
          - Rarely used elements are grouped into "junk" virtual folder also you can include to or exclude specific folder from the "Junk" list.

          <br/>
          <br/>
          <b>Editor for impex files:</b>

          <br/>
          - Syntax highlighting and errors indication for hybris impex files.
          <br/>
          - Selected column name highlighting.
          <br/>
          - Automatic alignment into columns via "Reformat code".
          <br/>
          - Code folding to improve readability.
          <br/>
          - Autocompletion within the header for modifier name and value. *
          <br/>
          - Autocompletion for hybris types based on the current IntelliJ-Project (hybris coretypes + your custom types). *
          <br/>
          - Autocompletion for hybris attributes based on the current IntelliJ-Project (hybris coretypes + your custom types). *

          <br/>
          <br/>
          * Due autocompletion based on the IntelliJ-Class-Index this feature is only available after the IntelliJ-indexing
          process is finished. The indexing is automatically run on the first completion-action. After an *-item.xml change or
          adding a new hybris-extension - and ant install - you can rerun the "indexing" mechanism with "Tools/Index [y]-types".


          <br/>
          <br/>
          <b>Guides:</b>
          <br/>
          - <a href="https://www.youtube.com/watch?v=_wVbowe39GM">How to import hybris project using Intellij IDEA "hybris integration" plugin</a>
          <br/>
          - <a href="https://www.youtube.com/watch?v=I-YYKD0OSyY">How to use HotSwap in hybris with Oracle JDK and DCEVM OpenJDK</a>
          <br/>
          Visit <a href="https://bitbucket.org/AlexanderBartash/impex-editor-intellij-idea-plugin">our page</a> in BitBucket for more details.

          <br/>
          <br/>
          <b>Contribution guidelines:</b>
          <br/>
          - <a href="https://bitbucket.org/AlexanderBartash/impex-editor-intellij-idea-plugin/wiki/How%20To%20Configure%20Project%20Environment">How To Configure Project Environment</a>
          <br/>
          - Available tasks <a href="https://bitbucket.org/AlexanderBartash/impex-editor-intellij-idea-plugin/issues?status=new&status=open">here</a> also you can suggest new features.
          <br/>
          - Also you can find useful information in our <a href="https://bitbucket.org/AlexanderBartash/impex-editor-intellij-idea-plugin/wiki/Home">wiki</a>.
          <br/>
          - For additional questions feel free to send me an email.

          <br/>
          <br/>
          <b>Developers:</b>
          <br/>
          - Alexander Bartash
          <br/>
          - Vlad Bozhenok
          <br/>
          - Markus Priegl
          <br/>
          - Martin Zdarsky
      ]]>
    </description>

    <change-notes>
        <![CDATA[
          3.1.2:
          <br/> - Impex lexer has been fixed to avoid showing syntax errors for one-character attribute names.
          <br/> - IntelliJ IDEA 13.1 has been removed from supported versions due to major changes in API. Now IntelliJ IDEA 14.1 is the oldest supported versions.
          <br/> - Backward compatibility has been improved for early versions of IntelliJ IDEA 14.1.
          <br/> - Minor improvements have been made in project import.
          <br/>
          <br/>
          3.1.1:
          <br/> - Bug fixes for Windows.
          <br/>
          <br/>
          3.1:
          <br/> - Automatic Spring facet configuration has been improved. Project import dialog has been redesigned to provide new configuration, validation. New import mode has been implemented to import OOTB hybris extensions in read-only mode like a library.
          <br/>
          <br/>
          3.0:
          <br/> - Automatic Spring facet configuration has been implemented. Classpath configuration has been improved. Plugin setting dialog has been redesigned and ability to configure "Junk" folders has been added to it.
          <br/>
          <br/>
          2.2:
          <br/> - Ability to specify a directory where all "*.iml" module files will be stored has been implemented.
          <br/>
          <br/>
          2.1:
          <br/> - Enhanced project view tree. Rarely used elements have been grouped into "junk" virtual folder.
          <br/>
          <br/>
          2.0:
          <br/> - Import of hybris extensions to Intellij IDEA with automatic module dependency management and classpath configuration.
          <br/>
          <br/>
          1.8:
          <br/> - Plugin has been ported to WebStorm and other IDEA based IDEs. Various bugfixes in the impex lexer and parser has been made to improve stability.
          <br/>
          <br/>
          1.7.4.1:
          <br/> - Header name highlighting for JDK 1.7 has been fixed.
          <br/>
          <br/>
          1.7.4:
          <br/> - New smart code folding strategy has been implemented. Plugin settings with ability to disable code folding has been added to the IDEA setting dialog.
          <br/>
          <br/>
          1.7.3:
          <br/> - Stability of header name highlighting has been improved.
          <br/>
          <br/>
          1.7.2.1:
          <br/> - Compatibility with Idea 14 fixed.
          <br/>
          <br/>
          1.7.2:
          <br/> - Header name highlighting has been fixed.
          <br/>
          <br/>
          1.7.1:
          <br/> - Backward compatibility with Idea 13 fixed.
          <br/>
          <br/>
          1.7:
          <br/> - Selected column name highlighting.
          <br/>
          <br/>
          1.6:
          <br/> - Syntax validation and errors highlighting.
          <br/>
          <br/>
          1.5:
          <br/> - Square and round brackets folding support.
          <br/>
          <br/>
          1.4:
          <br/> - Implemented automatic alignment into columns via "Reformat code" feature.
          <br/>
          <br/>
          1.3.3:
          <br/> - Fixes for reported syntax highlighting bugs.
          <br/>
          <br/>
          1.3.2:
          <br/> - Various lexer improvements. Macros syntax highlighting fixed.
          <br/>
          <br/>
          1.3.1:
          <br/> - Added autocompletion for hybris type system based on ItemModel-inheritance. (Thanks to Markus Priegl)
          <br/>
          <br/>
          1.3:
          <br/> - Added simple code completion within the header for modifier name and value. (Thanks to Markus Priegl)
          <br/>
          <br/>
          1.2.2:
          <br/> - Header related modifier value detection rules have been fixed.
          <br/>
          <br/>
          1.2.1:
          <br/> - Character '-' added to allowed chars for an attribute name.
          <br/> - Ignore case option has been enabled at jFlex.
          <br/> - Colours has been fixed a bit.
          <br/>
          <br/>
          1.2:
          <br/> - Lexical analyzer has been improved a lot.
          <br/> - Correct colours configuration implemented for the Default and Darcula color schemes.
          <br/> - The plugin was rebuilt for JDK 1.6 as idea requires 1.6+.
          <br/>
          <br/>
          1.1.1:
          <br/>- The plugin was rebuilt for JDK 1.5.
          <br/>
          <br/>
          1.1:
          <br/>- The plugin was rebuilt for JDK 1.6_45.
      ]]>
    </change-notes>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Build+Number+Ranges for description -->
    <idea-version since-build="141"/>

    <!-- please see http://confluence.jetbrains.com/display/IDEADEV/Plugin+Compatibility+with+IntelliJ+Platform+Products
         on how to target different products -->
    <!-- uncomment to enable plugin in all products
    <depends>com.idea.modules.lang</depends>
    -->

    <extensions defaultExtensionNs="com.intellij">
        <!-- Core elements -->
        <fileTypeFactory implementation="com.intellij.idea.plugin.hybris.impex.file.ImpexFileTypeFactory"/>

        <lang.parserDefinition language="Impex"
                               implementationClass="com.intellij.idea.plugin.hybris.impex.ImpexParserDefinition"/>

        <lang.syntaxHighlighterFactory key="Impex"
                                       implementationClass="com.intellij.idea.plugin.hybris.impex.highlighting.ImpexSyntaxHighlighterFactory"/>

        <colorSettingsPage implementation="com.intellij.idea.plugin.hybris.impex.highlighting.ImpexColorSettingsPage"/>

        <additionalTextAttributes scheme="Default" file="colorSchemes/ImpexDefault.xml"/>
        <additionalTextAttributes scheme="Darcula" file="colorSchemes/ImpexDarcula.xml"/>

        <lang.commenter language="Impex"
                        implementationClass="com.intellij.idea.plugin.hybris.impex.commenter.ImpexCommenter"/>

        <lang.formatter language="Impex"
                        implementationClass="com.intellij.idea.plugin.hybris.impex.formatting.ImpexFormattingModelBuilder"/>

        <codeStyleSettingsProvider implementation="com.intellij.idea.plugin.hybris.impex.formatting.ImpexCodeStyleSettingsProvider"/>

        <langCodeStyleSettingsProvider implementation="com.intellij.idea.plugin.hybris.impex.formatting.ImpexLanguageCodeStyleSettingsProvider"/>

        <lang.foldingBuilder language="Impex"
                             implementationClass="com.intellij.idea.plugin.hybris.impex.folding.ImpexFoldingBuilder"/>

        <applicationConfigurable id="ImpexPlugin.ImpexConfigurable"
                                 instance="com.intellij.idea.plugin.hybris.settings.HybrisSettingsConfigurable"/>


        <!-- Header name highlighting components -->
        <applicationService serviceInterface="com.intellij.idea.plugin.hybris.impex.assistance.ImpexHeaderNameHighlighterService"
                            serviceImplementation="com.intellij.idea.plugin.hybris.impex.assistance.DefaultImpexHeaderNameHighlighterService"/>


        <projectService serviceImplementation="com.intellij.idea.plugin.hybris.settings.HybrisProjectSettingsComponent"/>
        <applicationService serviceImplementation="com.intellij.idea.plugin.hybris.settings.HybrisApplicationSettingsComponent"/>
    </extensions>

    <application-components>
        <component>
            <implementation-class>
                com.intellij.idea.plugin.hybris.impex.assistance.ImpexHeaderHighlighterComponent
            </implementation-class>
        </component>
    </application-components>

    <project-components>
    </project-components>

    <actions>
        <action id="ImpexPlugin.IndexHybrisItemTypes"
                class="com.intellij.idea.plugin.hybris.impex.indexer.IndexItemTypesAction"
                text="Index [y]-types"
                description="Run index-recreation of [y]-types (only works after ItemModel was being created!)">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>

</idea-plugin>
